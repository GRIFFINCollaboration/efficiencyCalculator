<html>

	<head>
		<script type="text/javascript" src="dygraph-combined.js"></script>
		<script type="text/javascript" src="dygraph-extra.js"></script>
		<script type="text/javascript" src="setup.js"></script>

		<link rel="stylesheet" type="text/css" href="efficiencyWidget.css" />
	</head>

	<body>
		<!--Fonts//////////////////////////////////////////////////////////////-->
		<script type="text/javascript">
	        //load the webfonts, and block the page until they're ready or failed - otherwise lots of rendering bugs happen!
	        WebFontConfig = { google: { families: [ 'Raleway' ] },
		        loading: function(){
		            //set the spinner going:
		            //drawSpinner('spinner', 'Requesting Styles');
	  	        },
		        active: function() {
		            //loadParameters();  //plugs in some defaults
		            //loadJSONP(window.Gatekeeper, "main"); //waits to fire main() until all the JSONPs have reported up or down
		        },
		        inactive: function() {
		            //loadParameters();
		            //loadJSONP(window.Gatekeeper, "main");
		        }
	        };
	        //thx paul:
	        (function() {
	        	var wf = document.createElement('script');
	        	wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	        	wf.type = 'text/javascript';
		        wf.async = 'true';
		        var s = document.getElementsByTagName('script')[0];
	    	    s.parentNode.insertBefore(wf, s);
	      	})();
    	</script>

    	<div id='wrapper'>
		    <!--Branding///////////////////////////////////////////////////////////-->
		    <div id='branding'>
		      <img id='logo' src='logo.gif'></img>
		      <h1 id='title'>GRIFFIN</h1>
		    </div>

		    <!--Links///////////////////////////////////////////////////////////-->
		    <div class='linkWrapper'>
			    <button id='wikiLink' class='standardButton'>Wiki Help</button>
			    <button id='yieldDB' class='standardButton'>TRIUMF Yield Database</button>
			</div>

		    <!--Graph///////////////////////////////////////////////////////////-->
			<div id='graphDiv'></div>

			<!--Control Panel///////////////////////////////////////////////////-->
			<div id='controlPanel'>
				<h2 id='controlTitle' class='widgetTitle'>Plot Options</h2>

				<div id='enableHPGe' class='detectorSwitch'>HPGe</div>
				<div id='enableLaBr3' class='detectorSwitch'>LaBr3</div>
				<!--div id='enableLEPS' class='detectorSwitch'>LEPS</div-->

				<br><br>
				<input id='xMin' class='widgetInput' type='number' value='1'></input>
				<label id='xMinLabel' class='inputLabel' for='xMin'>< E <</label>
				<input id='xMax' class='widgetInput' type='number' value='1000'></input>
				<label id='xMaxLabel' class='inputLabel' for='xMax'>keV</label>
				<select id='xScale'>
					<option value='lin'>Linear</option>
					<option value='log'>Log</option>
				</select>				

				<br><br>
				<input id='yMin' class='widgetInput' type='number' value='0'></input>
				<label id='yMinLabel' class='inputLabel' for='yMin'>< effic. <</label>
				<input id='yMax' class='widgetInput' type='number' value='100'></input>
				<label id='yMaxLabel' class='inputLabel' for='yMax'>%</label>

				<br><br>
				<div id='HPGeControl'>
					<label id='HPGeDistanceSwitchLabel', class='inputLabel', for='HPGeDistanceSwitch'>HPGe Distance</label>
					<select id='HPGeDistanceSwitch'>
						<option value='11.0'>11.0</option>
						<option value='14.5'>14.5</option>
					</select>
					<label id='HPGeDistanceSwitchLabel', class='inputLabel', for='HPGeDistanceSwitch'>cm</label>

					<br><br>
					<label id='nHPGeSwitchLabel', class='inputLabel', for='nHPGeSwitch'>No. HPGe</label>
					<select id='nHPGeSwitch'>
						<option value='8'>8</option>
						<option value='12'>12</option>
						<option value='16'>16</option>
					</select>

					<br><br>
					<label id='delrinLabel' class='inputLabel' for='delrinSwitch'>Delrin Absorbers: </label>
					<select id='delrinSwitch'>
						<option value='0'>None</option>
						<option value='10'>10 mm</option>
						<option value='20'>20 mm</option>
					</select>

					<br><br>
					<label id='summingSchemeLabel' class='inputLabel' for='summingScheme'>Summing: </label>
					<select id='summingScheme'>
						<option value='crystal'>Per Crystal</option>
						<option value='clover'>Per Clover</option>
						<option value='array'>Full Array</option>
					</select>
				</div>

				<br><br>
				<a id='savePlot' download='efficiencyPlot.png'>Save Plot</a>
				<input id='filename', type='text' value='efficiencyPlot.png'></input>

			</div>

			<!--Widgets///////////////////////////////////////////////////////////-->
			<div id='effWidget' class='widget'>
				<h2 id='effWidgetTitle' class='widgetTitle'>Singles Efficiency</h2>
				<input id='inputEnergy' class='widgetInput' type='number' value='0'></input>
				<label id='inputEnergyLabel' class='inputLabel' for='inputEnergy'></label>
				<div id='effWidgetResultHPGe' class='widgetResult'>0.0</div>
				<div id='effWidgetResultLaBr3' class='widgetResult'>0.0</div>
				<!--div id='effWidgetResultLEPS' class='widgetResult'>0.0</div-->
				<label id='effWidgetResultLabel' class='inputLabel' for='effWidgetResult'>%</label>
			</div>

			<div id='coincEffWidget' class='widget'>
				<h2 id='coincEffWidgetTitle' class='widgetTitle'>Coincidence Efficiency</h2>
				<input id='coincInputEnergy1' class='widgetInput' type='number' value='0'></input>
				<label id='coincInputEnergyLabel1' class='inputLabel' for='coincInputEnergy1'>keV +</label>
				<input id='coincInputEnergy2' class='widgetInput' type='number' value='0'></input>
				<label id='coincInputEnergyLabel2' class='inputLabel' for='coincInputEnergy2'></label>			
				<div id='coincEffWidgetResultHPGe' class='widgetResult'>0.0</div>
				<div id='coincEffWidgetResultLaBr3' class='widgetResult'>0.0</div>
				<!--div id='coincEffWidgetResultLEPS' class='widgetResult'>0.0</div-->
				<label id='coincEffWidgetResultLabel' class='inputLabel' for='coincEffWidgetResult'>%</label>
			</div>

			<div id='tripleEffWidget' class='widget'>
				<h2 id='tripleEffWidgetTitle' class='widgetTitle'>Triples Efficiency</h2>
				<input id='tripleInputEnergy1' class='widgetInput' type='number' value='0'></input>
				<label id='tripleInputEnergyLabel1' class='inputLabel' for='tripleInputEnergy1'>keV +</label>
				<input id='tripleInputEnergy2' class='widgetInput' type='number' value='0'></input>
				<label id='tripleInputEnergyLabel2' class='inputLabel' for='tripleInputEnergy2'>keV +</label>
				<input id='tripleInputEnergy3' class='widgetInput' type='number' value='0'></input>
				<label id='tripleInputEnergyLabel3' class='inputLabel' for='tripleInputEnergy3'></label>
				<div id='tripleEffWidgetResult' class='widgetResult'>0.0</div>
				<label id='tripleEffWidgetResultLabel' class='inputLabel' for='tripleEffWidgetResult'>%</label>
			</div>

			<br>
			<div id='rateWidget' class='widget'>
				<h2 id='rateWidgetTitle' class='widgetTitle'>Singles Detection Rate</h2>
				<input id='singlesRateEnergy' class='widgetInput' type='number' value='0'></input>
				<label id='singlesRateEnergyLabel' class='inputLabel' for='singlesRateEnergy'>keV, </label>
				<input id='singlesRateBR' class='widgetInput' type='number' value='1'></input>
				<label id='singlesRateBRLabel' class='inputLabel' for='singlesRateBR'>BR, </label>
				<input id='singlesRateIntensity' class='widgetInput' type='number' value='1E6'></input>
				<label id='singlesRateIntensityLabel' class='inputLabel' for='singlesRateIntensity'>pps</label>
				<br>
				<div id='rateWidgetResultHPGe' class='widgetResult'>0</div>
				<div id='rateWidgetResultLaBr3' class='widgetResult'>0</div>
				<!--div id='rateWidgetResultLEPS' class='widgetResult'>0</div-->
				<select id='ratePeriod'>
					<option value='1'>per second</option>
					<option value='3600'>per hour</option>
					<option value='43200'>per 12 hours</option>
				</select>
			</div>

			<div id='coincidentRateWidget' class='widget'>
				<h2 id='coincRateWidgetTitle' class='widgetTitle'>Coincidence Detection Rate</h2>
				<input id='coincRateEnergy1' class='widgetInput' type='number' value='0'></input>
				<label id='coincRateEnergyLabel1' class='inputLabel' for='coincRateEnergy1'>keV + </label>
				<input id='coincRateEnergy2' class='widgetInput' type='number' value='0'></input>
				<label id='coincRateEnergyLabel2' class='inputLabel' for='coincRateEnergy2'>keV, </label>
				<input id='coincRateBR' class='widgetInput' type='number' value='1'></input>
				<label id='coincRateBRLabel' class='inputLabel' for='coincRateBR'>BR, </label>
				<input id='coincRateIntensity' class='widgetInput' type='number' value='1E6'></input>
				<label id='coincRateIntensityLabel' class='inputLabel' for='coincRateIntensity'>pps</label>
				<br>
				<div id='coincRateWidgetResultHPGe' class='widgetResult'>0</div>
				<div id='coincRateWidgetResultLaBr3' class='widgetResult'>0</div>
				<!--div id='coincRateWidgetResultLEPS' class='widgetResult'>0</div-->
				<select id='coincRatePeriod'>
					<option value='1'>per second</option>
					<option value='3600'>per hour</option>
					<option value='43200'>per 12 hours</option>
				</select>
			</div>

			<!--Footer//////////////////////////////////////////////////////////-->
			<div id='push'></div>

		</div>

		<div id='footer'>GRIFFIN 2013 - Powered by <a
		href="http://dygraphs.com/">Dygraphs.js</a> <BR> GRIFFIN Collaboration Spokesperson: Adam Garnsworthy (garns@triumf.ca) - GEANT4 Simulations: Evan Rand - UI/UX Design & Web Development: Bill Mills</div>

		<img id='pngDump'></img>

		<script type='text/javascript'>
			setup();
		</script>
	</body>

</html>